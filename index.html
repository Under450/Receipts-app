<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HMRC Receipt Extractor</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <h1>HMRC Receipt Extractor <small id="status">Ready</small></h1>

    <!-- Controls -->
    <div class="box">
      <div class="row">
        <input id="camera" type="file" accept="image/*" capture="environment" hidden>
        <input id="library" type="file" accept="image/*" hidden>
        <button id="btnCamera">üì∑ Take Photo</button>
        <button id="btnLibrary">üñºÔ∏è Choose from Library</button>
        <button id="btnExtract" class="ghost">Extract</button>
        <button id="btnCSV" class="ghost">Export CSV</button>
        <button id="btnClear" class="ghost">Clear</button>
      </div>
      <img id="preview" alt="">
      <div id="ocrText"></div>
    </div>

    <!-- Table -->
    <table>
      <thead>
        <tr>
          <th>Supplier</th><th>VAT No</th><th>Date</th><th>Description / Notes</th>
          <th>Net</th><th>VAT</th><th>Gross</th><th>Method</th><th>Audit</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
      <tfoot>
        <tr>
          <td colspan="4">Totals</td>
          <td id="tNet">0.00</td><td id="tVat">0.00</td><td id="tGross">0.00</td>
          <td colspan="2"></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Manual modal -->
  <div class="modal" id="modal">
    <div class="card">
      <h2>Manual Fix <small class="muted">Review &amp; Save</small></h2>
      <div class="grid">
        <div>
          <img id="modalPreview" alt="" style="max-width:100%;border-radius:8px;border:1px solid #333"/>
        </div>
        <div>
          <label>Supplier<input id="mSupplier"></label>
          <label>VAT No<input id="mVatNo"></label>
          <label>Date<input id="mDate" type="date"></label>
          <label>Description<input id="mDesc"></label>
          <label>Purpose / Notes<textarea id="mNotes"></textarea></label>
          <label>Category
            <select id="mCat">
              <option value="">‚Äî Choose ‚Äî</option>
              <option>Office Supplies</option><option>Travel</option><option>Meals</option>
              <option>Phone & Internet</option><option>Tools</option><option>Subcontractors</option>
              <option>Vehicle Costs</option><option>Rent & Utilities</option><option>Other</option>
            </select>
          </label>
          <div class="grid">
            <label>Net (¬£)<input id="mNet" inputmode="decimal"></label>
            <label>VAT (¬£)<input id="mVat" inputmode="decimal"></label>
          </div>
          <label>Gross (¬£)<input id="mGross" inputmode="decimal"></label>
          <label>Method
            <select id="mMethod"><option>Card</option><option>Cash</option><option>Bank</option></select>
          </label>
        </div>
      </div>
      <div class="right">
        <button id="mCancel" class="ghost">Cancel</button>
        <button id="mSave">Save</button>
      </div>
    </div>
  </div>

<script src="app.js"></script>
</body>
</html>
